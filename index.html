<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MK Vocab for Kids</title>
    <link rel="manifest" href="/mk-vocab-p1-game/manifest.json">
    <link rel="apple-touch-icon" href="/mk-vocab-p1-game/images/icon-192x192.png">
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Sarabun:wght@400;700&display=swap');

        /* สีหลักของปุ่มต่างๆ (Kids-friendly, Brightened Colors) */
        :root {
            --color-pink: #FF4081; /* Brighter Deep Pink */
            --color-blue: #2196F3; /* Bright Blue */
            --color-green: #4CAF50; /* Bright Green */
            --color-orange: #FF9800; /* Bright Orange */
            --color-purple: #9C27B0; /* Brighter Purple */
            --text-color: #333; /* Dark text for contrast */
            --shadow-light: rgba(0, 0, 0, 0.15);
            --shadow-dark: rgba(0, 0, 0, 0.25);
        }

        body {
            font-family: 'Sarabun', sans-serif;
            /* พื้นหลังไล่สีอ่อน/สดใส (Brighter Gradient) */
            background: linear-gradient(135deg, #FFFDE7, #FFC1E3); /* Soft Yellow to Bright Pink */
            color: var(--text-color);
            margin: 0;
            padding: 0; 
            /* ทำให้ body ยึดเต็มหน้าจอในแนวตั้ง */
            min-height: 100vh; 
            display: flex;
            justify-content: center;
            align-items: center;
            text-align: center;
        }

        /* The 9:16 Aspect Ratio Frame - ปรับให้ครอบคลุมตามแนวตั้ง (Viewport Height) */
        .container {
            /* ลดความโปร่งใสลง 30% (เหลือ 70%) */
            background-color: rgba(255, 255, 255, 0.9); /* เพิ่มความทึบแสงเล็กน้อยเพื่อให้มองเห็นชัดเจนขึ้น */
            border-radius: 20px;
            box-shadow: 0 12px 30px rgba(0, 0, 0, 0.3); /* เพิ่มเงาให้ดูมีมิติ */
            box-sizing: border-box;
            
            /* Logic for 9:16 Aspect Ratio - ให้ยึดจากความสูงเป็นหลัก (vh) และจำกัดความกว้าง (vw) */
            width: 56.25vh; /* 9/16 ของความสูงของ viewport */
            max-width: 90vw; /* จำกัดความกว้างไม่ให้เกิน 90% ของ viewport width */
            aspect-ratio: 9 / 16; 
            
            /* หากความสูงของจอเล็กเกินไป ให้กว้างไม่เกิน 450px และสูงตามอัตราส่วน */
            max-height: 100vh; /* จำกัดความสูงสูงสุด */
            
            display: flex;
            flex-direction: column;
            padding: 1.5rem; /* เพิ่ม padding เล็กน้อย */
            
            margin: auto;
        }
        
        /* Fallback for very wide screens (Optional: keeps the max-width) */
        @media (min-aspect-ratio: 16/9) {
             .container {
                width: 56.25vh; /* 9/16 ของความสูง */
                max-width: 450px; /* หากความสูงของจอมาก ให้กว้างไม่เกิน 450px */
            }
        }
        
        /* Fallback for very tall screens (Optional: keeps the max-width) */
        @media (max-aspect-ratio: 9/16) {
             .container {
                width: 90vw;
                max-width: 450px; /* จำกัดไม่ให้กว้างเกินไป */
                height: auto; /* ปล่อยให้ความสูงเป็นไปตามเนื้อหา */
                aspect-ratio: 9 / 16;
            }
        }


        h1 {
            color: var(--color-purple);
            font-size: 2.2em; /* ปรับขนาดฟอนต์ให้ใหญ่ขึ้น */
            text-shadow: 2px 2px 5px var(--shadow-light);
            margin-bottom: 0.75rem;
        }
        
        /* Category Page - หน้าแรก */
        #category-page { 
            display: flex; 
            flex-grow: 1; 
            flex-direction: column;
            justify-content: flex-start; 
            align-items: stretch;
            padding-top: 0.5rem; 
        }
        .category-grid {
            display: grid;
            /* ปรับให้ขนาดปุ่มกว้างขึ้นเล็กน้อย */
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr)); 
            gap: 1rem; 
            margin-top: 1.5rem; 
            padding: 0 0.5rem;
            overflow-y: auto; 
        }
        .category-button {
            padding: 1rem 0.5rem; 
            font-size: 1em; /* ปรับขนาดฟอนต์ปุ่ม */
            border-radius: 20px; /* ทำให้โค้งมนขึ้น */
            border: none;
            color: white;
            font-weight: bold;
            cursor: pointer;
            /* ปรับเงาปุ่มให้สดใสขึ้น */
            box-shadow: 0 5px 0 rgba(0, 0, 0, 0.3); 
            transition: transform 0.1s, box-shadow 0.1s;
        }
        .category-button:active {
             transform: translateY(3px); /* กดแล้วจมลงมากขึ้น */
             box-shadow: 0 2px 0 rgba(0, 0, 0, 0.3); 
        }
        .category-icon {
            display: block; 
            font-size: 1.5em; /* ปรับขนาดไอคอนให้ใหญ่ขึ้น */
            margin-bottom: 0.25rem;
        }
        
        /* Lesson Page */
        #lesson-page { 
            display: none; 
            flex-grow: 1; 
            flex-direction: column;
            justify-content: space-between; 
        }
        
        /* Vocab Card */
        #vocab-card {
            background-color: var(--color-blue);
            border-radius: 25px; /* โค้งมนมากขึ้น */
            padding: 2.5rem 1.5rem;
            flex-grow: 1; 
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3); /* เงาเข้มขึ้น */
            margin-top: 1rem;
            margin-bottom: 1.5rem;
        }
        #thai-word {
            font-size: 4.5em; /* ปรับขนาดให้ใหญ่ขึ้นสำหรับคำไทย */
            color: white;
            text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.4);
            margin-bottom: 0.75rem;
            line-height: 1.1;
        }
        #english-word {
            font-size: 3em; /* ปรับขนาดให้ใหญ่ขึ้นสำหรับคำอังกฤษ */
            color: #fff;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.4);
            margin-bottom: 0;
            line-height: 1.1;
        }
        
        /* Control Buttons */
        .all-controls {
            display: flex;
            flex-wrap: wrap; 
            justify-content: center;
            gap: 0.75rem; 
            margin-top: 0.5rem;
            margin-bottom: 0.5rem;
        }

        .all-controls button {
            padding: 12px 18px; /* เพิ่มขนาดปุ่มเล็กน้อย */
            border-radius: 15px; 
            border: none; 
            font-size: 1em; /* ปรับขนาดฟอนต์ปุ่มควบคุม */
            cursor: pointer;
            font-weight: bold;
            color: white; 
            box-shadow: 0 5px 0 var(--shadow-dark); 
            transition: all 0.2s ease-in-out;
            
            flex: 1 1 auto; 
            min-width: 0; 
        }
        
        /* ปุ่ม Back, Next, Prev ให้มีขนาดใหญ่กว่าปุ่มอื่น */
        #prev-btn, #next-btn, #back-to-cat-btn {
            flex: 1 1 45%; /* ให้กว้างขึ้นเล็กน้อย */
            max-width: calc(50% - 0.375rem); 
        }
        
        /* Button Colors (Brightened with darker shadow for pop) */
        .audio-btn { background-color: var(--color-blue); box-shadow: 0 5px 0 #1565C0; } /* Darker Blue Shadow */
        .audio-btn:active { transform: translateY(2px); box-shadow: 0 3px 0 #1565C0; }
        .nav-btn { background-color: var(--color-orange); box-shadow: 0 5px 0 #EF6C00; } /* Darker Orange Shadow */
        .nav-btn:active { transform: translateY(2px); box-shadow: 0 3px 0 #EF6C00; }
        .play-btn { background-color: var(--color-green); box-shadow: 0 5px 0 #2E7D32; } /* Darker Green Shadow */
        .play-btn:active { transform: translateY(2px); box-shadow: 0 3px 0 #2E7D32; }
        .back-btn { background-color: #757575; box-shadow: 0 5px 0 #424242; } /* Darker Gray Shadow */
        .back-btn:active { transform: translateY(2px); box-shadow: 0 3px 0 #424242; }
        
        /* ปุ่มที่ Disabled */
        .all-controls button:disabled {
            opacity: 0.7; /* ลดความทึบแสงเล็กน้อย */
            cursor: not-allowed;
            transform: none;
            box-shadow: 0 5px 0 var(--shadow-dark); 
        }
    </style>
</head>
<body>

    <div class="container">
        <div id="category-page">
            <h1>เลือกหมวดหมู่</h1>
            <div id="category-grid" class="category-grid">
                </div>
        </div>

        <div id="lesson-page">
            <h1 id="lesson-title"></h1>
            
            <div id="vocab-card">
                <span id="thai-word" class="word"></span>
                <span id="english-word" class="word"></span>
            </div>
            
            <div class="all-controls">
                <button id="prev-btn" class="nav-btn">◀️ ย้อนกลับ</button>
                <button id="next-btn" class="nav-btn">ถัดไป ▶️</button>
                <button onclick="speakText(currentVocab.thai, 'th-TH')" class="audio-btn">ฟัง (ไทย) 🔊</button>
                <button onclick="speakText(currentVocab.english, 'en-US')" class="audio-btn">Listen (EN) 🔊</button>
                <button id="play-pause-btn" class="play-btn">Play ▶️</button>
                <button id="stop-btn" class="back-btn">Stop ⏹️</button>
                <button id="back-to-cat-btn" class="back-btn">Back to Categories 🏠</button>
            </div>
            
        </div>
    </div>

    <script>
        // ข้อมูลคำศัพท์ (ไม่แก้ไข)
        const fullVocabularyData = {
            "สัตว์": [
                { thai: "สุนัข", english: "dog" }, { thai: "แมว", english: "cat" }, { thai: "นก", english: "bird" }, { thai: "ปลา", english: "fish" }, { thai: "ไก่", english: "chicken" }, { thai: "เป็ด", english: "duck" }, { thai: "หมู", english: "pig" }, { thai: "วัว", english: "cow" }, { thai: "ม้า", english: "horse" }, { thai: "แกะ", english: "sheep" }, { thai: "แพะ", english: "goat" }, { thai: "เสือ", english: "tiger" }, { thai: "สิงโต", english: "lion" }, { thai: "ช้าง", english: "elephant" }, { thai: "หมี", english: "bear" }, { thai: "กระต่าย", english: "rabbit" }, { thai: "จิ้งจอก", english: "fox" }, { thai: "หนู", english: "mouse" }, { thai: "งู", english: "snake" }, { thai: "กบ", english: "frog" }, { thai: "เต่า", english: "turtle" }, { thai: "จระเข้", english: "crocodile" }, { thai: "ลิง", english: "monkey" }, { thai: "ยีราฟ", english: "giraffe" }, { thai: "ม้าลาย", english: "zebra" }
            ],
            "ร่างกาย": [
                { thai: "ตา", english: "eye" }, { thai: "หู", english: "ear" }, { thai: "จมูก", english: "nose" }, { thai: "ปาก", english: "mouth" }, { thai: "ฟัน", english: "tooth" }, { thai: "ลิ้น", english: "tongue" }, { thai: "ผม", english: "hair" }, { thai: "หน้า", english: "face" }, { thai: "คอ", english: "neck" }, { thai: "ไหล่", english: "shoulder" }, { thai: "แขน", english: "arm" }, { thai: "มือ", english: "hand" }, { thai: "นิ้ว", english: "finger" }, { thai: "ขา", english: "leg" }, { thai: "เท้า", english: "foot" }, { thai: "นิ้วเท้า", english: "toe" }, { thai: "ท้อง", english: "stomach" }, { thai: "หัวใจ", english: "heart" }, { thai: "สมอง", english: "brain" }, { thai: "กระดูก", english: "bone" }, { thai: "ผิวหนัง", english: "skin" }, { thai: "เลือด", english: "blood" }, { thai: "เข่า", english: "knee" }, { thai: "ข้อศอก", english: "elbow" }, { thai: "เล็บ", english: "nail" }
            ],
            "อุปกรณ์การเรียน": [
                { thai: "ปากกา", english: "pen" }, { thai: "ดินสอ", english: "pencil" }, { thai: "ยางลบ", english: "eraser" }, { thai: "ไม้บรรทัด", english: "ruler" }, { thai: "กระดาษ", english: "paper" }, { thai: "สมุด", english: "notebook" }, { thai: "หนังสือ", english: "book" }, { thai: "กระเป๋านักเรียน", english: "school bag" }, { thai: "โต๊ะ", english: "table" }, { thai: "เก้าอี้", english: "chair" }, { thai: "กระดานดำ", english: "blackboard" }, { thai: "ชอล์ก", english: "chalk" }, { thai: "ปากกาเมจิก", english: "marker" }, { thai: "สีเทียน", english: "crayon" }, { thai: "สีน้ำ", english: "watercolor" }, { thai: "พู่กัน", english: "paintbrush" }, { thai: "กรรไกร", english: "scissors" }, { thai: "กาว", english: "glue" }, { thai: "แฟ้ม", english: "folder" }, { thai: "คอมพิวเตอร์", english: "computer" }, { thai: "โทรศัพท์", english: "telephone" }, { thai: "นาฬิกา", english: "clock" }, { thai: "ทีวี", english: "TV" }, { thai: "กล้อง", english: "camera" }, { thai: "เครื่องปริ้น", english: "printer" }
            ],
            "ครอบครัว": [
                { thai: "พ่อ", english: "father" }, { thai: "แม่", english: "mother" }, { thai: "ลูกชาย", english: "son" }, { thai: "ลูกสาว", english: "daughter" }, { thai: "พี่ชาย", english: "elder brother" }, { thai: "น้องชาย", english: "younger brother" }, { thai: "พี่สาว", english: "elder sister" }, { thai: "น้องสาว", english: "younger sister" }, { thai: "ปู่/ตา", english: "grandfather" }, { thai: "ย่า/ยาย", english: "grandmother" }, { thai: "ลุง", english: "uncle" }, { thai: "ป้า", english: "aunt" }, { thai: "น้า", english: "aunt" }, { thai: "อา", english: "aunt/uncle" }, { thai: "หลาน", english: "nephew/niece" }, { thai: "ญาติ", english: "relative" }, { thai: "ครอบครัว", english: "family" }, { thai: "บ้าน", english: "home" }, { thai: "ห้องนอน", english: "bedroom" }, { thai: "ห้องน้ำ", english: "bathroom" }, { thai: "ห้องครัว", english: "kitchen" }, { thai: "ห้องนั่งเล่น", english: "living room" }, { thai: "ประตู", english: "door" }, { thai: "หน้าต่าง", english: "window" }, { thai: "หลังคา", english: "roof" }
            ],
            "อาหารและเครื่องดื่ม": [
                { thai: "ข้าว", english: "rice" }, { thai: "ขนมปัง", english: "bread" }, { thai: "นม", english: "milk" }, { thai: "น้ำ", english: "water" }, { thai: "ไข่", english: "egg" }, { thai: "เนื้อ", english: "meat" }, { thai: "ปลา", english: "fish" }, { thai: "ไก่", english: "chicken" }, { thai: "น้ำส้ม", english: "orange juice" }, { thai: "น้ำเปล่า", english: "drinking water" }, { thai: "ชา", english: "tea" }, { thai: "กาแฟ", english: "coffee" }, { thai: "น้ำตาล", english: "sugar" }, { thai: "เกลือ", english: "salt" }, { thai: "พริกไทย", english: "pepper" }, { thai: "เค้ก", english: "cake" }, { thai: "ไอศกรีม", english: "ice cream" }, { thai: "คุกกี้", english: "cookie" }, { thai: "พิซซ่า", english: "pizza" }, { thai: "เบอร์เกอร์", english: "hamburger" }, { thai: "ไส้กรอก", english: "sausage" }, { thai: "แซนด์วิช", english: "sandwich" }, { thai: "ซุป", english: "soup" }, { thai: "สลัด", english: "salad" }, { thai: "ขนม", english: "dessert" }
            ],
            "เสื้อผ้าและเครื่องแต่งกาย": [
                { thai: "เสื้อ", english: "shirt" }, { thai: "กางเกง", english: "pants" }, { thai: "กระโปรง", english: "skirt" }, { thai: "ชุด", english: "dress" }, { thai: "ถุงเท้า", english: "sock" }, { thai: "รองเท้า", english: "shoes" }, { thai: "หมวก", english: "hat" }, { thai: "เสื้อกันหนาว", english: "sweater" }, { thai: "เสื้อโค้ท", english: "coat" }, { thai: "เสื้อยืด", english: "T-shirt" }, { thai: "กางเกงขาสั้น", english: "shorts" }, { thai: "ถุงมือ", english: "glove" }, { thai: "ผ้าพันคอ", english: "scarf" }, { thai: "เข็มขัด", english: "belt" }, { thai: "แว่นตา", english: "glasses" }, { thai: "นาฬิกา", english: "watch" }, { thai: "สร้อยคอ", english: "necklace" }, { thai: "แหวน", english: "ring" }, { thai: "ต่างหู", english: "earrings" }, { thai: "รองเท้าแตะ", english: "sandals" }, { thai: "ชุดว่ายน้ำ", english: "swimsuit" }, { thai: "ชุดนอน", english: "pajamas" }, { thai: "ผ้าเช็ดหน้า", english: "handkerchief" }, { thai: "ผ้าขนหนู", english: "towel" }, { thai: "หมวกแก๊ป", english: "cap" }
            ],
            "กีฬา": [
                { thai: "ฟุตบอล", english: "football" }, { thai: "บาสเกตบอล", english: "basketball" }, { thai: "วอลเลย์บอล", english: "volleyball" }, { thai: "เทนนิส", english: "tennis" }, { thai: "แบดมินตัน", english: "badminton" }, { thai: "ว่ายน้ำ", english: "swimming" }, { thai: "วิ่ง", english: "running" }, { thai: "กอล์ฟ", english: "golf" }, { thai: "มวย", english: "boxing" }, { thai: "ยิมนาสติก", english: "gymnastics" }, { thai: "โยคะ", english: "yoga" }, { thai: "สเก็ต", english: "skating" }, { thai: "จักรยาน", english: "cycling" }, { thai: "ตกปลา", english: "fishing" }, { thai: "พายเรือ", english: "rowing" }, { thai: "ยิงธนู", english: "archery" }, { thai: "ฮอกกี้", english: "hockey" }, { thai: "เบสบอล", english: "baseball" }, { thai: "ปิงปอง", english: "table tennis" }, { thai: "เจ็ตสกี", english: "jet ski" }, { thai: "ปีนเขา", english: "climbing" }, { thai: "กระโดด", english: "jumping" }, { thai: "โยน", english: "throwing" }, { thai: "สนาม", english: "field" }, { thai: "ทีม", english: "team" }
            ],
            "พืชผักผลไม้": [
                { thai: "ผัก", english: "vegetable" }, { thai: "ผลไม้", english: "fruit" }, { thai: "กล้วย", english: "banana" }, { thai: "สับปะรด", english: "pineapple" }, { thai: "ส้ม", english: "orange" }, { thai: "แอปเปิ้ล", english: "apple" }, { thai: "มะม่วง", english: "mango" }, { thai: "ข้าวโพด", english: "corn" }, { thai: "มะเขือเทศ", english: "tomato" }, { thai: "มันฝรั่ง", english: "potato" }, { thai: "แครอท", english: "carrot" }, { thai: "องุ่น", english: "grape" }, { thai: "แตงโม", english: "watermelon" }, { thai: "สตรอว์เบอร์รี", english: "strawberry" }, { thai: "มะพร้าว", english: "coconut" }, { thai: "ลำไย", english: "longan" }, { thai: "ฝรั่ง", english: "guava" }, { thai: "มะนาว", english: "lime" }, { thai: "มะละกอ", english: "papaya" }, { thai: "ทุเรียน", english: "durian" }, { thai: "พริก", english: "chili" }, { thai: "กระเทียม", english: "garlic" }, { thai: "หอมใหญ่", english: "onion" }, { thai: "ผักกาด", english: "lettuce" }, { thai: "กะหล่ำ", english: "cabbage" }
            ],
            "สี": [
                { thai: "แดง", english: "red" }, { thai: "เหลือง", english: "yellow" }, { thai: "น้ำเงิน", english: "blue" }, { thai: "เขียว", english: "green" }, { thai: "ส้ม", english: "orange" }, { thai: "ม่วง", english: "purple" }, { thai: "ชมพู", english: "pink" }, { thai: "น้ำตาล", english: "brown" }, { thai: "ดำ", english: "black" }, { thai: "ขาว", english: "white" }, { thai: "เทา", english: "gray" }, { thai: "ทอง", english: "gold" }, { thai: "เงิน", english: "silver" }, { thai: "ฟ้า", english: "sky blue" }, { thai: "คราม", english: "indigo" }, { thai: "บานเย็น", english: "magenta" }, { thai: "มะกอก", english: "olive" }, { thai: "ครีม", english: "cream" }, { thai: "กรมท่า", english: "navy" }, { thai: "เขียวอ่อน", english: "light green" }, { thai: "เขียวเข้ม", "english": "dark green" }, { thai: "สดใส", english: "bright" }, { thai: "ซีด", english: "pale" }, { thai: "ทึบ", english: "opaque" }, { thai: "ใส", english: "clear" }
            ],
            "ตัวเลข": [
                { thai: "หนึ่ง", english: "one" }, { thai: "สอง", english: "two" }, { thai: "สาม", english: "three" }, { thai: "สี่", english: "four" }, { thai: "ห้า", english: "five" }, { thai: "หก", english: "six" }, { thai: "เจ็ด", english: "seven" }, { thai: "แปด", english: "eight" }, { thai: "เก้า", english: "nine" }, { thai: "สิบ", english: "ten" }, { thai: "สิบเอ็ด", english: "eleven" }, { thai: "สิบสอง", english: "twelve" }, { thai: "ยี่สิบ", english: "twenty" }, { thai: "สามสิบ", english: "thirty" }, { thai: "ร้อย", english: "hundred" }, { thai: "พัน", english: "thousand" }, { thai: "หมื่น", english: "ten thousand" }, { thai: "แสน", english: "hundred thousand" }, { thai: "ล้าน", english: "million" }, { thai: "ศูนย์", english: "zero" }, { thai: "คู่", english: "even" }, { thai: "คี่", english: "odd" }, { thai: "น้อยกว่า", english: "less than" }, { thai: "มากกว่า", english: "greater than" }, { thai: "เท่ากับ", english: "equal to" }
            ],
            "รูปทรง": [
                { thai: "วงกลม", english: "circle" }, { thai: "สี่เหลี่ยม", english: "square" }, { thai: "สามเหลี่ยม", english: "triangle" }, { thai: "วงรี", english: "oval" }, { thai: "ห้าเหลี่ยม", english: "pentagon" }, { thai: "หกเหลี่ยม", english: "hexagon" }, { thai: "ดาว", english: "star" }, { thai: "หัวใจ", english: "heart" }, { thai: "สี่เหลี่ยมจัตุรัส", english: "rectangle" }, { thai: "สี่เหลี่ยมผืนผ้า", english: "rectangle" }, { thai: "ลูกบาศก์", english: "cube" }, { thai: "ทรงกลม", english: "sphere" }, { thai: "ทรงกระบอก", english: "cylinder" }, { thai: "พีระมิด", english: "pyramid" }, { thai: "โคน", english: "cone" }, { thai: "เส้นตรง", english: "straight line" }, { thai: "เส้นโค้ง", english: "curve" }, { thai: "จุด", english: "point" }, { thai: "มุม", english: "angle" }, { thai: "ด้าน", english: "side" }, { thai: "พื้นผิว", english: "surface" }, { thai: "ขนาด", english: "size" }, { thai: "เล็ก", english: "small" }, { thai: "ใหญ่", english: "big" }, { thai: "บาง", english: "thin" }
            ],
            "อารมณ์": [
                { thai: "สุข", english: "happy" }, { thai: "เศร้า", english: "sad" }, { thai: "โกรธ", english: "angry" }, { thai: "กลัว", english: "afraid" }, { thai: "ตกใจ", english: "shocked" }, { thai: "เบื่อ", english: "bored" }, { thai: "ง่วง", english: "sleepy" }, { thai: "หิว", english: "hungry" }, { thai: "กระหาย", english: "thirsty" }, { thai: "ประหลาดใจ", english: "surprised" }, { thai: "ตื่นเต้น", english: "excited" }, { thai: "สนุก", english: "fun" }, { thai: "เหงา", english: "lonely" }, { thai: "กังวล", english: "worried" }, { thai: "สบายใจ", english: "comfortable" }, { thai: "อาย", english: "shy" }, { thai: "มั่นใจ", english: "confident" }, { thai: "ขี้เล่น", english: "playful" }, { thai: "ตลก", english: "funny" }, { thai: "ร้องไห้", english: "crying" }, { thai: "หัวเราะ", english: "laughing" }, { thai: "ยิ้ม", english: "smiling" }, { thai: "ขมวดคิ้ว", english: "frowning" }, { thai: "ดีใจ", english: "joyful" }, { thai: "พึงพอใจ", english: "satisfied" }
            ],
            "สถานที่": [
                { thai: "บ้าน", english: "home" }, { thai: "โรงเรียน", english: "school" }, { thai: "สวน", english: "garden" }, { thai: "ตลาด", english: "market" }, { thai: "โรงพยาบาล", english: "hospital" }, { thai: "ธนาคาร", english: "bank" }, { thai: "วัด", english: "temple" }, { thai: "โบสถ์", english: "church" }, { thai: "ทะเล", english: "sea" }, { thai: "ภูเขา", english: "mountain" }, { thai: "แม่น้ำ", english: "river" }, { thai: "ป่า", english: "forest" }, { thai: "ถนน", english: "road" }, { thai: "สะพาน", english: "bridge" }, { thai: "ร้านค้า", english: "shop" }, { thai: "สนามบิน", english: "airport" }, { thai: "สถานีรถไฟ", english: "train station" }, { thai: "ห้องสมุด", english: "library" }, { thai: "โรงหนัง", english: "cinema" }, { thai: "สระว่ายน้ำ", english: "swimming pool" }, { thai: "ที่จอดรถ", english: "parking lot" }, { thai: "ห้องครัว", english: "kitchen" }, { thai: "ห้องน้ำ", english: "bathroom" }, { thai: "สนามเด็กเล่น", english: "playground" }, { thai: "โรงยิม", english: "gym" }
            ],
            "ยานพาหนะ": [
                { thai: "รถยนต์", english: "car" }, { thai: "รถบัส", english: "bus" }, { thai: "รถไฟ", english: "train" }, { thai: "เรือ", english: "boat" }, { thai: "เครื่องบิน", english: "airplane" }, { thai: "รถจักรยาน", english: "bicycle" }, { thai: "มอเตอร์ไซค์", english: "motorcycle" }, { thai: "รถบรรทุก", english: "truck" }, { thai: "รถพยาบาล", english: "ambulance" }, { thai: "รถดับเพลิง", english: "fire truck" }, { thai: "แท็กซี่", english: "taxi" }, { thai: "เรือดำน้ำ", english: "submarine" }, { thai: "รถตู้", english: "van" }, { thai: "เฮลิคอปเตอร์", english: "helicopter" }, { thai: "รถแทรคเตอร์", english: "tractor" }, { thai: "รถราง", english: "tram" }, { thai: "เรือใบ", english: "sailboat" }, { thai: "สเก็ตบอร์ด", english: "skateboard" }, { thai: "จักรยานยนต์", english: "moped" }, { thai: "เรือยนต์", english: "motorboat" }, { thai: "รถไฟใต้ดิน", english: "subway" }, { thai: "รถลาก", english: "cart" }, { thai: "ล้อ", english: "wheel" }, { thai: "เครื่องยนต์", english: "engine" }, { thai: "ใบพัด", english: "propeller" }
            ],
            "อาชีพ": [
                { thai: "ครู", english: "teacher" }, { thai: "หมอ", english: "doctor" }, { thai: "พยาบาล", english: "nurse" }, { thai: "ตำรวจ", english: "police" }, { thai: "ทหาร", english: "soldier" }, { thai: "วิศวกร", english: "engineer" }, { thai: "นักดับเพลิง", english: "firefighter" }, { thai: "นักบิน", english: "pilot" }, { thai: "พ่อครัว", english: "chef" }, { thai: "ชาวนา", english: "farmer" }, { thai: "นักกีฬา", english: "athlete" }, { thai: "นักร้อง", english: "singer" }, { thai: "นักเต้น", english: "dancer" }, { thai: "ศิลปิน", english: "artist" }, { thai: "สถาปนิก", english: "architect" }, { thai: "นักข่าว", english: "journalist" }, { thai: "คนขับรถ", english: "driver" }, { thai: "ช่าง", english: "mechanic" }, { thai: "นักวิทยาศาสตร์", english: "scientist" }, { thai: "ผู้จัดการ", english: "manager" }, { thai: "พนักงาน", english: "employee" }, { thai: "นักเรียน", english: "student" }, { thai: "แม่บ้าน", english: "housekeeper" }, { thai: "นักบัญชี", english: "accountant" }, { thai: "เภสัชกร", english: "pharmacist" }
            ],
            "กริยา": [
                { thai: "กิน", english: "eat" }, { thai: "ดื่ม", english: "drink" }, { thai: "นอน", english: "sleep" }, { thai: "เดิน", english: "walk" }, { thai: "วิ่ง", english: "run" }, { thai: "กระโดด", english: "jump" }, { thai: "บิน", english: "fly" }, { thai: "ว่ายน้ำ", english: "swim" }, { thai: "พูด", english: "speak" }, { thai: "ฟัง", english: "listen" }, { thai: "ดู", english: "look" }, { thai: "เขียน", english: "write" }, { thai: "อ่าน", english: "read" }, { thai: "เล่น", english: "play" }, { thai: "ทำงาน", english: "work" }, { thai: "เรียน", english: "study" }, { thai: "สอน", english: "teach" }, { thai: "เปิด", english: "open" }, { thai: "ปิด", english: "close" }, { thai: "นั่ง", english: "sit" }, { thai: "ยืน", english: "stand" }, { thai: "ร้องเพลง", english: "sing" }, { thai: "เต้นรำ", english: "dance" }, { thai: "สร้าง", english: "build" }, { thai: "ช่วย", english: "help" }
            ],
            "ธรรมชาติ": [
                { thai: "พระอาทิตย์", english: "sun" }, { thai: "พระจันทร์", english: "moon" }, { thai: "ดาว", english: "star" }, { thai: "ท้องฟ้า", english: "sky" }, { thai: "เมฆ", english: "cloud" }, { thai: "ฝน", english: "rain" }, { thai: "หิมะ", english: "snow" }, { thai: "ลม", english: "wind" }, { thai: "ดิน", english: "soil" }, { thai: "หิน", english: "rock" }, { thai: "ต้นไม้", english: "tree" }, { thai: "ดอกไม้", english: "flower" }, { thai: "ใบไม้", english: "leaf" }, { thai: "ภูเขา", english: "mountain" }, { thai: "แม่น้ำ", english: "river" }, { thai: "ทะเล", english: "sea" }, { thai: "ป่า", english: "forest" }, { thai: "อากาศ", english: "air" }, { thai: "แสง", english: "light" }, { thai: "เงา", english: "shadow" }, { thai: "ร้อน", english: "hot" }, { thai: "หนาว", english: "cold" }, { thai: "ฤดู", english: "season" }, { thai: "ฤดูร้อน", english: "summer" }, { thai: "ฤดูหนาว", english: "winter" }
            ],
            "เวลา": [
                { thai: "เช้า", english: "morning" }, { thai: "กลางวัน", english: "noon" }, { thai: "เย็น", english: "evening" }, { thai: "ค่ำ", english: "night" }, { thai: "วัน", english: "day" }, { thai: "สัปดาห์", english: "week" }, { thai: "เดือน", english: "month" }, { thai: "ปี", english: "year" }, { thai: "วินาที", english: "second" }, { thai: "นาที", english: "minute" }, { thai: "ชั่วโมง", english: "hour" }, { thai: "วันนี้", english: "today" }, { thai: "เมื่อวาน", english: "yesterday" }, { thai: "พรุ่งนี้", english: "tomorrow" }, { thai: "ก่อน", english: "before" }, { thai: "หลัง", english: "after" }, { thai: "เร็ว", english: "fast" }, { thai: "ช้า", english: "slow" }, { thai: "อดีต", english: "past" }, { thai: "ปัจจุบัน", english: "present" }, { thai: "อนาคต", english: "future" }, { thai: "ตอนเช้า", english: "in the morning" }, { thai: "เที่ยงคืน", english: "midnight" }, { thai: "รุ่งเช้า", english: "dawn" }, { thai: "สมัยก่อน", english: "ancient times" }
            ],
            "ทิศทาง": [
                { thai: "เหนือ", english: "north" }, { thai: "ใต้", english: "south" }, { thai: "ตะวันออก", english: "east" }, { thai: "ตะวันตก", english: "west" }, { thai: "ซ้าย", english: "left" }, { thai: "ขวา", english: "right" }, { thai: "บน", english: "up" }, { thai: "ล่าง", english: "down" }, { thai: "หน้า", english: "front" }, { thai: "หลัง", english: "back" }, { thai: "ข้างใน", english: "inside" }, { thai: "ข้างนอก", english: "outside" }, { thai: "ข้างๆ", english: "beside" }, { thai: "ตรงข้าม", english: "opposite" }, { thai: "รอบๆ", english: "around" }, { thai: "ใกล้", english: "near" }, { thai: "ไกล", english: "far" }, { thai: "ตรงไป", english: "straight" }, { thai: "โค้ง", english: "curve" }, { thai: "ที่นี่", english: "here" }, { thai: "ที่นั่น", english: "there" }, { thai: "ตรงกลาง", english: "middle" }, { thai: "สูง", english: "high" }, { thai: "ต่ำ", english: "low" }, { thai: "ลึก", english: "deep" }
            ]
        };
        
        // กรองคำศัพท์ให้เหลือ 25 คำแรกตามที่ร้องขอ (ไม่แก้ไข)
        const vocabularyData = {};
        for (const category in fullVocabularyData) {
            vocabularyData[category] = fullVocabularyData[category].slice(0, 25);
        }

        const categoryPage = document.getElementById('category-page');
        const lessonPage = document.getElementById('lesson-page');
        const lessonTitle = document.getElementById('lesson-title');
        const thaiWordEl = document.getElementById('thai-word');
        const englishWordEl = document.getElementById('english-word');
        const nextBtn = document.getElementById('next-btn');
        const prevBtn = document.getElementById('prev-btn');
        const playPauseBtn = document.getElementById('play-pause-btn');
        const stopBtn = document.getElementById('stop-btn');
        const backToCatBtn = document.getElementById('back-to-cat-btn');

        let currentVocab = null; 
        let currentCategoryVocabs = [];
        let currentIndex = 0;
        let isPlaying = false;

        // สีและไอคอนสำหรับ 17 หมวดหมู่ (ใช้สีเดิมแต่เป็นตัวแปรใหม่ที่ปรับให้สดใสขึ้นใน :root)
        const categoryColors = {
            "สัตว์": "#FF4081", /* Brighter Pink */
            "ร่างกาย": "#2196F3", /* Bright Blue */
            "อุปกรณ์การเรียน": "#4CAF50", /* Bright Green */
            "ครอบครัว": "#FF9800", /* Bright Orange */
            "อาหารและเครื่องดื่ม": "#9C27B0", /* Brighter Purple */
            "เสื้อผ้าและเครื่องแต่งกาย": "#3F51B5", /* Indigo */
            "กีฬา": "#673AB7", /* Deep Purple */
            "พืชผักผลไม้": "#8BC34A", /* Light Green */
            "สี": "#00BCD4", /* Cyan */
            "ตัวเลข": "#F44336", /* Red */
            "รูปทรง": "#FFEB3B", /* Yellow */
            "อารมณ์": "#607D8B", /* Blue Grey */
            "สถานที่": "#795548", /* Brown */
            "ยานพาหนะ": "#009688", /* Teal */
            "อาชีพ": "#E91E63", /* Pink */
            "กริยา": "#03A9F4", /* Light Blue */
            "ธรรมชาติ": "#004D40", /* Dark Teal */
            "เวลา": "#FF5722", /* Deep Orange */
            "ทิศทาง": "#8BC34A" /* Light Green */
        };
        
        // ไอคอน (ไม่แก้ไข)
        const categoryIcons = {
            "สัตว์": "🐶",
            "ร่างกาย": "👤",
            "อุปกรณ์การเรียน": "📚",
            "ครอบครัว": "👨‍👩‍👧‍👦",
            "อาหารและเครื่องดื่ม": "🍔",
            "เสื้อผ้าและเครื่องแต่งกาย": "👚",
            "กีฬา": "⚽",
            "พืชผักผลไม้": "🍎",
            "สี": "🎨",
            "ตัวเลข": "🔢",
            "รูปทรง": "🔺",
            "อารมณ์": "😊",
            "สถานที่": "🗺️",
            "ยานพาหนะ": "🚗",
            "อาชีพ": "🧑‍💼",
            "กริยา": "🏃‍♂️",
            "ธรรมชาติ": "☀️",
            "เวลา": "⏰",
            "ทิศทาง": "⬆️"
        };

        function createCategoryButtons() {
            const grid = document.getElementById('category-grid');
            grid.innerHTML = '';
            
            const categoryOrder = Object.keys(vocabularyData);
            
            categoryOrder.forEach(category => {
                const button = document.createElement('button');
                button.className = 'category-button';
                // ใช้สีที่กำหนดใน categoryColors
                button.style.backgroundColor = categoryColors[category];
                button.innerHTML = `<span class="category-icon">${categoryIcons[category]}</span>${category}`;
                button.onclick = () => loadLesson(category); 
                grid.appendChild(button);
            });
        }

        function loadLesson(category) {
            currentCategoryVocabs = vocabularyData[category];
            currentIndex = 0;
            lessonTitle.textContent = category;
            categoryPage.style.display = 'none';
            lessonPage.style.display = 'flex'; 
            displayVocab();
            updateButtonState();
        }

        function displayVocab() {
            if (currentIndex >= currentCategoryVocabs.length) {
                thaiWordEl.textContent = "จบแล้ว!";
                englishWordEl.textContent = "Finished!";
                stopAutoPlay();
                nextBtn.disabled = true;
                prevBtn.disabled = true;
                return;
            }
            
            if (currentCategoryVocabs.length > 0) {
                currentVocab = currentCategoryVocabs[currentIndex]; 
                thaiWordEl.textContent = currentVocab.thai;
                englishWordEl.textContent = currentVocab.english;
            }
        }

        function nextVocab() {
            stopAutoPlay();
            nextBtn.disabled = false;
            prevBtn.disabled = false;

            if (currentIndex < currentCategoryVocabs.length - 1) {
                currentIndex++;
                displayVocab();
                updateButtonState();
            } else {
                 currentIndex = currentCategoryVocabs.length;
                 displayVocab();
            }
        }

        function prevVocab() {
            stopAutoPlay();
            if (currentIndex > 0) {
                currentIndex--;
                displayVocab();
                updateButtonState();
            }
        }

        function updateButtonState() {
            nextBtn.disabled = false;
            prevBtn.disabled = false;

            if (currentIndex === 0) {
                prevBtn.disabled = true;
            }
            if (currentIndex === currentCategoryVocabs.length - 1) {
                nextBtn.disabled = true;
            }
            if (currentIndex >= currentCategoryVocabs.length) {
                 nextBtn.disabled = true; 
            }
            
            if (isPlaying) {
                playPauseBtn.textContent = 'Pause ⏸️';
            } else {
                playPauseBtn.textContent = 'Play ▶️';
            }
        }
        
        // ** ฟังก์ชันแก้ไขปัญหาการเล่นอัตโนมัติ ** (ไม่แก้ไขเนื้อหาสคริปต์)
        function playCurrentVocabAuto() {
            if (!isPlaying) {
                window.speechSynthesis.cancel();
                return;
            }

            if (currentIndex >= currentCategoryVocabs.length) {
                currentIndex = 0; 
            }
            
            displayVocab();
            updateButtonState();

            const currentItem = currentCategoryVocabs[currentIndex];
            
            const thaiUtterance = new SpeechSynthesisUtterance(currentItem.thai);
            thaiUtterance.lang = 'th-TH';

            const englishUtterance = new SpeechSynthesisUtterance(currentItem.english);
            englishUtterance.lang = 'en-US';

            const voices = window.speechSynthesis.getVoices();
            const thaiVoice = voices.find(v => v.lang === 'th-TH' && v.name.includes('Lekha'));
            const englishVoice = voices.find(v => v.lang === 'en-US' && v.name.includes('Samantha'));
            
            if (thaiVoice) {
                thaiUtterance.voice = thaiVoice;
            }
            if (englishVoice) {
                englishUtterance.voice = englishVoice;
            }

            englishUtterance.addEventListener('end', () => {
                if (!isPlaying) return;
                setTimeout(() => {
                    currentIndex++;
                    updateButtonState();
                    playCurrentVocabAuto(); 
                }, 1000); 
            });

            thaiUtterance.addEventListener('end', () => {
                if (!isPlaying) return;
                setTimeout(() => {
                    window.speechSynthesis.speak(englishUtterance);
                }, 500); 
            });

            window.speechSynthesis.cancel();
            window.speechSynthesis.speak(thaiUtterance);
        }
        
        function toggleAutoPlay() {
            if (isPlaying) {
                stopAutoPlay();
            } else {
                isPlaying = true;
                updateButtonState();
                
                if (currentIndex >= currentCategoryVocabs.length) {
                    currentIndex = 0; 
                }
                
                playCurrentVocabAuto();
            }
        }
        
        function speakText(text, lang) {
            stopAutoPlay(); 
            
            const utterance = new SpeechSynthesisUtterance(text);
            utterance.lang = lang;
            
            const voice = window.speechSynthesis.getVoices().find(v => {
                if (lang === 'th-TH') return v.lang.includes('th') && v.name.includes('Lekha');
                if (lang === 'en-US') return v.lang.includes('en') && v.name.includes('Samantha');
                return v.lang.includes(lang.substring(0, 2));
            });
            if (voice) {
                utterance.voice = voice;
            }
            
            window.speechSynthesis.cancel(); 
            window.speechSynthesis.speak(utterance);
        }

        function stopAutoPlay() {
            isPlaying = false;
            updateButtonState();
            window.speechSynthesis.cancel();
        }

        function goToCategoryPage() {
            stopAutoPlay();
            nextBtn.disabled = false;
            prevBtn.disabled = false;
            lessonPage.style.display = 'none';
            categoryPage.style.display = 'flex'; 
        }

        // Event Listeners
        nextBtn.addEventListener('click', nextVocab);
        prevBtn.addEventListener('click', prevVocab);
        playPauseBtn.addEventListener('click', toggleAutoPlay);
        stopBtn.addEventListener('click', stopAutoPlay);
        backToCatBtn.addEventListener('click', goToCategoryPage);

        // ** การตั้งค่าเริ่มต้น **
        document.addEventListener('DOMContentLoaded', createCategoryButtons);
        createCategoryButtons();
    </script>
</body>
</html>
